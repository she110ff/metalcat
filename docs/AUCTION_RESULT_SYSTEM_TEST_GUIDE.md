# ğŸ† ê²½ë§¤ ë‚™ì°°/ìœ ì°° ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ

ê²½ë§¤ ë‚™ì°°/ìœ ì°° ìë™ ê²°ì • ì‹œìŠ¤í…œì„ ë¡œì»¬ í™˜ê²½ì—ì„œ ì§ì ‘ í…ŒìŠ¤íŠ¸í•˜ê³  ê²€ì¦í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•©ë‹ˆë‹¤.

## ğŸ“‹ ê°œìš”

ì´ ê°€ì´ë“œëŠ” Phase 1ê³¼ Phase 2ì—ì„œ êµ¬í˜„ëœ ê²½ë§¤ ë‚™ì°°/ìœ ì°° ì‹œìŠ¤í…œì˜ ì „ì²´ ê¸°ëŠ¥ì„ ë‹¨ê³„ë³„ë¡œ í…ŒìŠ¤íŠ¸í•˜ëŠ” ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤. **í¬ë¡  ìë™ ì²˜ë¦¬**ì™€ **ìˆ˜ë™ ì²˜ë¦¬** ë‘ ê°€ì§€ ë°©ì‹ì„ ëª¨ë‘ ì§€ì›í•˜ë©°, ì‹¤ì œ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ì‹œë®¬ë ˆì´ì…˜í•˜ì—¬ ì‹œìŠ¤í…œì˜ ì •í™•í•œ ë™ì‘ì„ ê²€ì¦í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ğŸ¯ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

1. **ë‚™ì°° ì„±ê³µ**: ì •ê°œë°œì´ ìµœê³ ê°€ë¡œ ì…ì°°í•˜ì—¬ ë‚™ì°°ë°›ëŠ” ìƒí™© (`materials1`)
2. **ë‚™ì°° ì‹¤íŒ¨**: ì •ê°œë°œì´ ì…ì°°í–ˆì§€ë§Œ ë‹¤ë¥¸ ì‚¬ìš©ìì—ê²Œ ë‚™ì°°ë˜ëŠ” ìƒí™© (`scrap1`)
3. **ìœ ì°°**: ì…ì°°ìê°€ ì—†ê±°ë‚˜ ì‹œì‘ê°€ì— ë¯¸ë‹¬í•˜ëŠ” ìƒí™© (`test_no_bids`)
4. **ê±°ë˜ ì •ë³´ ìë™ ìƒì„±**: ë‚™ì°° ì‹œ ê²°ì œ/ë°°ì†¡ ì •ë³´ ìë™ ìƒì„±
5. **í”„ë¡ íŠ¸ì—”ë“œ UI ê²€ì¦**:
   - ğŸ‰ "ì¶•í•˜í•©ë‹ˆë‹¤!" ë©”ì‹œì§€ (ë‚™ì°° ì„±ê³µ ì‹œ)
   - ğŸ’” "ì•„ì‰¬ì›Œìš”" ë©”ì‹œì§€ (ë‚™ì°° ì‹¤íŒ¨ ì‹œ)
   - ğŸ“‹ ëª©ë¡ ì¹´ë“œ ê°œì„ ì‚¬í•­ (ê°„ê²°í•œ ì‹œê°„ í‘œì‹œ, ë ˆì´ì•„ì›ƒ ìµœì í™”)
   - ğŸ”¨ ë§ˆê° ì„ë°• ìƒíƒœì—ì„œë„ ì…ì°° ê°€ëŠ¥

### âš¡ í…ŒìŠ¤íŠ¸ ë°©ì‹ ì„ íƒ

| ë°©ì‹                  | íŠ¹ì§•                                                            | ì‚¬ìš© ì‹œì              |
| --------------------- | --------------------------------------------------------------- | --------------------- |
| **ğŸ¤– í¬ë¡  ìë™ ì²˜ë¦¬** | ì‹¤ì œ ìš´ì˜í™˜ê²½ê³¼ ë™ì¼<br/>ë§¤ë¶„ ì •ê° ìë™ ì‹¤í–‰<br/>ëŒ€ê¸° ì‹œê°„ í•„ìš” | ì‹¤ì œ ì‹œìŠ¤í…œ ë™ì‘ í™•ì¸ |
| **âš¡ ìˆ˜ë™ ì¦‰ì‹œ ì²˜ë¦¬** | ì¦‰ì‹œ ê²°ê³¼ í™•ì¸<br/>ê°œë°œ/ë””ë²„ê¹… ìš©ë„<br/>ë¹ ë¥¸ í…ŒìŠ¤íŠ¸             | ë¹ ë¥¸ ê°œë°œ ê²€ì¦        |

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### 1. ì „ì œ ì¡°ê±´

- ë¡œì»¬ Supabaseê°€ ì‹¤í–‰ ì¤‘ì´ì–´ì•¼ í•©ë‹ˆë‹¤
- Dockerê°€ ì‹¤í–‰ ì¤‘ì´ì–´ì•¼ í•©ë‹ˆë‹¤
- **í¬ë¡  ì‹œìŠ¤í…œ ë§ˆì´ê·¸ë ˆì´ì…˜**ì´ ì ìš©ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤ (`20250201000006`)

```bash
# Supabase ìƒíƒœ í™•ì¸
npx supabase status

# í•„ìˆ˜ ë§ˆì´ê·¸ë ˆì´ì…˜ í™•ì¸ (20250201000005, 20250201000006 í¬í•¨ë˜ì–´ì•¼ í•¨)
docker exec supabase_db_metacat2 psql -U postgres -d postgres -c "
SELECT
  version,
  CASE
    WHEN version = '20250201000005' THEN 'âœ… ê²½ë§¤ ê²°ê³¼ í…Œì´ë¸”'
    WHEN version = '20250201000006' THEN 'âœ… í¬ë¡  ì‹œìŠ¤í…œ'
    ELSE 'ğŸ“‹ ê¸°íƒ€ ë§ˆì´ê·¸ë ˆì´ì…˜'
  END as description
FROM supabase_migrations.schema_migrations
WHERE version LIKE '202502%'
ORDER BY version;
"

# í¬ë¡  ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸
docker exec supabase_db_metacat2 psql -U postgres -d postgres -c "
SELECT
  jobname,
  schedule,
  active,
  CASE WHEN active THEN 'ğŸŸ¢ í™œì„±' ELSE 'ğŸ”´ ë¹„í™œì„±' END as status
FROM cron.job
WHERE jobname LIKE '%auction%';
"
```

### 2. í™˜ê²½ ì´ˆê¸°í™”

```bash
# ë°ì´í„°ë² ì´ìŠ¤ ì™„ì „ ë¦¬ì…‹ (ëª¨ë“  ë§ˆì´ê·¸ë ˆì´ì…˜ ì¬ì ìš©)
npx supabase db reset

# í¬ë¡  ì‹œìŠ¤í…œ ë§ˆì´ê·¸ë ˆì´ì…˜ì´ ëˆ„ë½ëœ ê²½ìš° ìˆ˜ë™ ì ìš©
docker cp supabase/migrations/20250201000006_create_auction_processor_functions.sql supabase_db_metacat2:/tmp/
docker exec supabase_db_metacat2 psql -U postgres -d postgres -f /tmp/20250201000006_create_auction_processor_functions.sql

# ì‹œë“œ ë°ì´í„° ë° ì •ê°œë°œ ê³„ì • í™•ì¸
docker exec supabase_db_metacat2 psql -U postgres -d postgres -c "
-- ì „ì²´ ì‚¬ìš©ì ìˆ˜ í™•ì¸
SELECT COUNT(*) as total_users FROM users;

-- ì •ê°œë°œ ê³„ì • í™•ì¸
SELECT
  id, phone_number, name,
  CASE WHEN id = '4ede4267-2d7c-4f83-8d9b-cb73eb96698e' THEN 'â† í…ŒìŠ¤íŠ¸ ê³„ì •' ELSE '' END as note
FROM users
WHERE phone_number = '01012345678' OR name = 'ì •ê°œë°œ';

-- í…ŒìŠ¤íŠ¸ ê²½ë§¤ ìˆ˜ í™•ì¸
SELECT COUNT(*) as total_auctions FROM auctions;
"
```

ì˜ˆìƒ ì¶œë ¥:

```
 total_users
-------------
          6  # 6ëª…ì˜ í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì (ì •ê°œë°œ í¬í•¨)

                  id                  | phone_number |  name  |     note
--------------------------------------+--------------+--------+---------------
 4ede4267-2d7c-4f83-8d9b-cb73eb96698e | 01012345678  | ì •ê°œë°œ | â† í…ŒìŠ¤íŠ¸ ê³„ì •

 total_auctions
----------------
             6  # 6ê°œì˜ í…ŒìŠ¤íŠ¸ ê²½ë§¤
```

## ğŸ“ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë°©ë²• ì„ íƒ

> **ğŸ’¡ íŒ**: ë‘ ê°€ì§€ ë°©ì‹ ì¤‘ ì›í•˜ëŠ” ë°©ë²•ì„ ì„ íƒí•˜ì—¬ ì§„í–‰í•˜ì„¸ìš”. í¬ë¡  ë°©ì‹ì€ ì‹¤ì œ ìš´ì˜í™˜ê²½ í…ŒìŠ¤íŠ¸ì—, ìˆ˜ë™ ë°©ì‹ì€ ë¹ ë¥¸ ê°œë°œ ê²€ì¦ì— ì í•©í•©ë‹ˆë‹¤.

---

## ğŸ¤– ë°©ë²• 1: í¬ë¡  ìë™ ì²˜ë¦¬ í…ŒìŠ¤íŠ¸

ì‹¤ì œ ìš´ì˜í™˜ê²½ê³¼ ë™ì¼í•˜ê²Œ pg_cronì´ ë§¤ë¶„ ì •ê°ì— ìë™ìœ¼ë¡œ ê²½ë§¤ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.

### 3-Aë‹¨ê³„: í¬ë¡  ê¸°ë°˜ ì‹œë‚˜ë¦¬ì˜¤ ì„¤ì •

```bash
# í¬ë¡  ìµœì í™” í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
docker cp instant-test-scenarios-with-cron.sql supabase_db_metacat2:/tmp/
docker exec supabase_db_metacat2 psql -U postgres -d postgres -f /tmp/instant-test-scenarios-with-cron.sql
```

### 4-Aë‹¨ê³„: í¬ë¡  ì‹¤í–‰ ëª¨ë‹ˆí„°ë§

```bash
# ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ (30ì´ˆë§ˆë‹¤ í™•ì¸)
watch -n 30 "echo 'â° í˜„ì¬ ì‹œê°„:' \$(date +'%H:%M:%S') && docker exec supabase_db_metacat2 psql -U postgres -d postgres -c 'SELECT COUNT(*) as processed_auctions FROM auction_results;'"

# ë˜ëŠ” í¬ë¡  ì‹¤í–‰ ë¡œê·¸ í™•ì¸
docker exec supabase_db_metacat2 psql -U postgres -d postgres -c "
SELECT
  job_name,
  status,
  TO_CHAR(started_at, 'HH24:MI:SS') as started_time,
  success_count,
  (metadata->>'processed_count')::INTEGER as processed
FROM cron_execution_logs
WHERE job_type = 'auction'
  AND started_at >= NOW() - INTERVAL '5 minutes'
ORDER BY started_at DESC;
"
```

### 5-Aë‹¨ê³„: ê²°ê³¼ í™•ì¸ (í¬ë¡  ì‹¤í–‰ í›„)

```bash
# ìµœì¢… ê²°ê³¼ í™•ì¸
docker exec supabase_db_metacat2 psql -U postgres -d postgres -c "
SELECT
  ar.auction_id,
  LEFT(a.title, 20) as title,
  ar.result_type,
  CASE
    WHEN ar.winning_user_id = '4ede4267-2d7c-4f83-8d9b-cb73eb96698e' THEN 'ğŸ† ì •ê°œë°œ ë‚™ì°°'
    WHEN ar.result_type = 'successful' THEN 'âœ… íƒ€ì¸ ë‚™ì°°'
    ELSE 'âŒ ìœ ì°°'
  END as result,
  TO_CHAR(ar.processed_at, 'HH24:MI:SS') as processed_time
FROM auction_results ar
JOIN auctions a ON ar.auction_id = a.id
ORDER BY ar.processed_at DESC;
"
```

---

## âš¡ ë°©ë²• 2: ìˆ˜ë™ ì¦‰ì‹œ ì²˜ë¦¬ í…ŒìŠ¤íŠ¸

í…ŒìŠ¤íŠ¸ìš© í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¦‰ì‹œ ê²°ê³¼ë¥¼ í™•ì¸í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.

### 3-Bë‹¨ê³„: ì¦‰ì‹œ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ ì„¤ì •

```bash
# ê¸°ë³¸ í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
docker cp instant-test-scenarios.sql supabase_db_metacat2:/tmp/
docker exec supabase_db_metacat2 psql -U postgres -d postgres -f /tmp/instant-test-scenarios.sql
```

### 4-Bë‹¨ê³„: ìˆ˜ë™ ì²˜ë¦¬ ì‹¤í–‰

```bash
# 30ì´ˆ~1ë¶„ ëŒ€ê¸° í›„ ì²˜ë¦¬ í•¨ìˆ˜ ì‹¤í–‰
sleep 60
docker exec supabase_db_metacat2 psql -U postgres -d postgres -c "SELECT test_process_auction_results();"
```

### 5-Bë‹¨ê³„: ì¦‰ì‹œ ê²°ê³¼ í™•ì¸

```bash
# ì²˜ë¦¬ ê²°ê³¼ í™•ì¸
docker exec supabase_db_metacat2 psql -U postgres -d postgres -c "
SELECT
  ar.auction_id,
  LEFT(a.title, 20) as title,
  ar.result_type,
  CASE
    WHEN ar.winning_user_id = '4ede4267-2d7c-4f83-8d9b-cb73eb96698e' THEN 'ğŸ† ì •ê°œë°œ ë‚™ì°°'
    WHEN ar.result_type = 'successful' THEN 'âœ… íƒ€ì¸ ë‚™ì°°'
    ELSE 'âŒ ìœ ì°°'
  END as result
FROM auction_results ar
JOIN auctions a ON ar.auction_id = a.id
ORDER BY ar.processed_at DESC;
"
```

---

## ğŸ“± í”„ë¡ íŠ¸ì—”ë“œ UI í…ŒìŠ¤íŠ¸

### 6ë‹¨ê³„: ì•±ì—ì„œ ê²°ê³¼ í™•ì¸

ê²½ë§¤ ê²°ê³¼ ì²˜ë¦¬ê°€ ì™„ë£Œë˜ë©´ **Expo ì•±ì„ ì‹¤í–‰**í•˜ì—¬ ë‹¤ìŒ ê°œì„ ì‚¬í•­ë“¤ì„ í™•ì¸í•©ë‹ˆë‹¤:

#### âœ… í™•ì¸ í•­ëª©ë“¤:

1. **ê²½ë§¤ ëª©ë¡ ì¹´ë“œ ê°œì„ ì‚¬í•­**:

   - ğŸ• **ê°„ê²°í•œ ì‹œê°„ í‘œì‹œ**: "3ì¼", "2ì‹œê°„", "45ë¶„" (ê¸°ì¡´ "3ì¼ 5ì‹œê°„ ë‚¨ìŒ" â†’ ê°œì„ )
   - ğŸ“ **ë ˆì´ì•„ì›ƒ ìµœì í™”**: ë¹ˆ ê³µê°„ ì œê±°, ì •ë³´ ë°€ë„ í–¥ìƒ
   - ğŸ·ï¸ **ìƒíƒœ ë°°ì§€**: "ì§„í–‰ì¤‘", "ë§ˆê°ì„ë°•", "ë‚™ì°°", "ìœ ì°°"

2. **ê²½ë§¤ ìƒì„¸ í™”ë©´**:

   - ğŸ”¨ **ë§ˆê° ì„ë°• ì…ì°°**: "ë§ˆê°ì„ë°•" ìƒíƒœì—ì„œë„ ì…ì°° ì…ë ¥ UI í‘œì‹œ
   - ğŸ‰ **ì •ê°œë°œ ë‚™ì°° ì„±ê³µ**: `materials1`ì—ì„œ "ì¶•í•˜í•©ë‹ˆë‹¤! ë‚™ì°°ë°›ìœ¼ì…¨ìŠµë‹ˆë‹¤!" ë©”ì‹œì§€
   - ğŸ’” **ì •ê°œë°œ ë‚™ì°° ì‹¤íŒ¨**: `scrap1`ì—ì„œ "ì•„ì‰¬ì›Œìš”" ë©”ì‹œì§€
   - ğŸ‘€ **ë¯¸ì°¸ì—¬ ê²½ë§¤**: `scrap3`ì—ì„œ ì¼ë°˜ì ì¸ ë‚™ì°° ì •ë³´ë§Œ í‘œì‹œ

3. **ì¶•í•˜ ë©”ì‹œì§€ ì •í™•ì„±**:
   - âœ… **ë‚™ì°°ë°›ì€ ì‚¬ìš©ìì—ê²Œë§Œ** "ì¶•í•˜í•©ë‹ˆë‹¤!" í‘œì‹œ
   - âŒ **ë‚™ì°°ë°›ì§€ ì•Šì€ ì‚¬ìš©ìì—ê²ŒëŠ”** ì¶•í•˜ ë©”ì‹œì§€ ë¯¸í‘œì‹œ

#### ğŸ“± ì•± ì‹¤í–‰:

```bash
# ì•± ì‹œì‘ (ìƒˆ í„°ë¯¸ë„ì—ì„œ)
cd /Users/youngsoo.jung/development/metacat2
npm start
# ë˜ëŠ”
npx expo start
```

#### ğŸ” í™•ì¸ ìˆœì„œ:

1. **í™ˆ â†’ ê²½ë§¤ ëª©ë¡**: ê°œì„ ëœ ì¹´ë“œ ë ˆì´ì•„ì›ƒê³¼ ì‹œê°„ í‘œì‹œ í™•ì¸
2. **`materials1` ìƒì„¸**: ì •ê°œë°œ ë‚™ì°° ì„±ê³µ â†’ "ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤!" í™•ì¸
3. **`scrap1` ìƒì„¸**: ì •ê°œë°œ ë‚™ì°° ì‹¤íŒ¨ â†’ "ğŸ’” ì•„ì‰¬ì›Œìš”" í™•ì¸
4. **`scrap3` ìƒì„¸**: ì •ê°œë°œ ë¯¸ì°¸ì—¬ â†’ ì¼ë°˜ ë‚™ì°° ì •ë³´ë§Œ í™•ì¸

---

## ğŸ“Š ê²°ê³¼ ê²€ì¦

### 7ë‹¨ê³„: ë°ì´í„°ë² ì´ìŠ¤ ìµœì¢… ê²°ê³¼ í™•ì¸

**ë‘ ê°€ì§€ ë°©ë²• ì¤‘ ì–´ëŠ ê²ƒì„ ì„ íƒí–ˆë“ ** ë™ì¼í•œ ëª…ë ¹ì–´ë¡œ ìµœì¢… ê²°ê³¼ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```bash
# ì „ì²´ í…ŒìŠ¤íŠ¸ ê²°ê³¼ ìš”ì•½
docker exec supabase_db_metacat2 psql -U postgres -d postgres -c "
SELECT 'ğŸ¯ === ì „ì²´ í…ŒìŠ¤íŠ¸ ê²°ê³¼ ìš”ì•½ === ğŸ¯' as summary;

SELECT
  ar.auction_id,
  LEFT(a.title, 25) as title,
  ar.result_type,
  ar.winning_amount,
  CASE
    WHEN ar.winning_user_id = '4ede4267-2d7c-4f83-8d9b-cb73eb96698e' THEN 'ğŸ† ì •ê°œë°œ ë‚™ì°°!'
    WHEN ar.result_type = 'successful' THEN 'âœ… ë‹¤ë¥¸ ì‚¬ìš©ì ë‚™ì°°'
    ELSE 'âŒ ìœ ì°°'
  END as result_status,
  TO_CHAR(ar.processed_at, 'HH24:MI:SS') as processed_time
FROM auction_results ar
JOIN auctions a ON ar.auction_id = a.id
ORDER BY ar.processed_at DESC;
"
```

### 8ë‹¨ê³„: ì •ê°œë°œ ì…ì°° í˜„í™© í™•ì¸

```bash
docker exec supabase_db_metacat2 psql -U postgres -d postgres -c "
-- ì •ê°œë°œ ì…ì°° ë° ê²°ê³¼ ìš”ì•½
SELECT 'ğŸ™‹â€â™‚ï¸ === ì •ê°œë°œ ì…ì°° í˜„í™© === ğŸ™‹â€â™‚ï¸' as info;

SELECT
  ab.auction_id,
  LEFT(a.title, 20) as title,
  ab.amount as my_bid,
  ab.is_top_bid,
  ar.result_type,
  CASE
    WHEN ar.winning_user_id = '4ede4267-2d7c-4f83-8d9b-cb73eb96698e' THEN 'ğŸ† ë‚™ì°° ì„±ê³µ'
    WHEN ar.result_type = 'successful' THEN 'ğŸ’” ë‚™ì°° ì‹¤íŒ¨'
    WHEN ar.result_type = 'failed' THEN 'âŒ ê²½ë§¤ ìœ ì°°'
    ELSE 'â³ ì²˜ë¦¬ ì¤‘'
  END as final_result
FROM auction_bids ab
JOIN auctions a ON ab.auction_id = a.id
LEFT JOIN auction_results ar ON a.id = ar.auction_id
WHERE ab.user_id = '4ede4267-2d7c-4f83-8d9b-cb73eb96698e'
ORDER BY ab.bid_time DESC;
"
```

### 9ë‹¨ê³„: ê±°ë˜ ì •ë³´ í™•ì¸

```bash
docker exec supabase_db_metacat2 psql -U postgres -d postgres -c "
-- ìë™ ìƒì„±ëœ ê±°ë˜ ì •ë³´ í™•ì¸
SELECT 'ğŸ’³ === ê±°ë˜ ì •ë³´ === ğŸ’³' as info;

SELECT
  ar.auction_id,
  LEFT(a.title, 20) as title,
  at.transaction_status,
  at.delivery_status,
  CASE
    WHEN ar.winning_user_id = '4ede4267-2d7c-4f83-8d9b-cb73eb96698e' THEN 'ğŸ† ì •ê°œë°œ êµ¬ë§¤'
    ELSE 'ğŸ‘¤ ë‹¤ë¥¸ ì‚¬ìš©ì êµ¬ë§¤'
  END as buyer_info
FROM auction_transactions at
JOIN auction_results ar ON at.auction_result_id = ar.id
JOIN auctions a ON ar.auction_id = a.id
WHERE ar.result_type = 'successful'
ORDER BY at.created_at DESC;
"
```

## âœ… ì˜ˆìƒ ê²°ê³¼

### ì„±ê³µì ì¸ í…ŒìŠ¤íŠ¸ ì™„ë£Œ ì‹œ ë‹¤ìŒê³¼ ê°™ì€ ê²°ê³¼ê°€ ë‚˜íƒ€ë‚©ë‹ˆë‹¤:

#### ğŸ“Š **ë°ì´í„°ë² ì´ìŠ¤ ê²°ê³¼**:

1. **ì •ê°œë°œ ë‚™ì°° ì„±ê³µ 1ê±´**: `materials1` (Hë¹”, 1,400ë§Œì›) ğŸ†
2. **ì •ê°œë°œ ë‚™ì°° ì‹¤íŒ¨ 1ê±´**: `scrap1` (ì•Œë£¨ë¯¸ëŠ„, 520ë§Œì›) ğŸ’”
3. **ë‹¤ë¥¸ ì‚¬ìš©ì ë‚™ì°°**: `scrap3` (í™©ë™, ê¸°ì¡´ ë‚™ì°°ì) âœ…
4. **ìë™ ê±°ë˜ ì •ë³´ ìƒì„±**: ëª¨ë“  ë‚™ì°°ì— ëŒ€í•´ `transaction_status: 'pending'` ìƒì„±

#### ğŸ“± **í”„ë¡ íŠ¸ì—”ë“œ UI ê²°ê³¼**:

1. **ê²½ë§¤ ëª©ë¡ ê°œì„ ì‚¬í•­**:

   - âœ… ê°„ê²°í•œ ì‹œê°„ í‘œì‹œ: "3ì¼", "2ì‹œê°„", "45ë¶„"
   - âœ… ë ˆì´ì•„ì›ƒ ìµœì í™”: ë¹ˆ ê³µê°„ ì œê±°, ì •ë³´ ë°€ë„ í–¥ìƒ
   - âœ… ì •í™•í•œ ìƒíƒœ ë°°ì§€: "ì§„í–‰ì¤‘", "ë§ˆê°ì„ë°•", "ë‚™ì°°", "ìœ ì°°"

2. **ê²½ë§¤ ìƒì„¸ í™”ë©´**:

   - âœ… ë§ˆê° ì„ë°• ì…ì°° ê°€ëŠ¥: `ending` ìƒíƒœì—ì„œë„ ì…ì°° UI í‘œì‹œ
   - âœ… ì •ê°œë°œ ë‚™ì°° ì„±ê³µ ì‹œ: "ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤! ë‚™ì°°ë°›ìœ¼ì…¨ìŠµë‹ˆë‹¤!"
   - âœ… ì •ê°œë°œ ë‚™ì°° ì‹¤íŒ¨ ì‹œ: "ğŸ’” ì•„ì‰¬ì›Œìš”" ë©”ì‹œì§€
   - âœ… ë¯¸ì°¸ì—¬ ê²½ë§¤: ì¼ë°˜ì ì¸ ë‚™ì°° ì •ë³´ë§Œ í‘œì‹œ

3. **ì¶•í•˜ ë©”ì‹œì§€ ì •í™•ì„±**:
   - âœ… ë‚™ì°°ë°›ì€ ì‚¬ìš©ìì—ê²Œë§Œ ì¶•í•˜ ë©”ì‹œì§€ í‘œì‹œ
   - âœ… ë‚™ì°°ë°›ì§€ ì•Šì€ ì‚¬ìš©ìì—ê²ŒëŠ” ì¶•í•˜ ë©”ì‹œì§€ ë¯¸í‘œì‹œ

## ğŸ”§ ë¬¸ì œ í•´ê²°

### ì¼ë°˜ì ì¸ ë¬¸ì œë“¤

1. **í¬ë¡  ì‹œìŠ¤í…œ ë§ˆì´ê·¸ë ˆì´ì…˜ ëˆ„ë½**:

   ```bash
   # í¬ë¡  ì‹œìŠ¤í…œ ìˆ˜ë™ ì ìš©
   docker cp supabase/migrations/20250201000006_create_auction_processor_functions.sql supabase_db_metacat2:/tmp/
   docker exec supabase_db_metacat2 psql -U postgres -d postgres -f /tmp/20250201000006_create_auction_processor_functions.sql

   # ë§ˆì´ê·¸ë ˆì´ì…˜ ê¸°ë¡ ì¶”ê°€
   docker exec supabase_db_metacat2 psql -U postgres -d postgres -c "
   INSERT INTO supabase_migrations.schema_migrations (version) VALUES ('20250201000006') ON CONFLICT DO NOTHING;
   "
   ```

2. **ì •ê°œë°œ ê³„ì • ëˆ„ë½**:

   ```bash
   # ìˆ˜ë™ìœ¼ë¡œ ì •ê°œë°œ ê³„ì • ì¶”ê°€
   docker exec supabase_db_metacat2 psql -U postgres -d postgres -c "
   INSERT INTO users (id, phone_number, name, address, is_phone_verified, created_at)
   VALUES ('4ede4267-2d7c-4f83-8d9b-cb73eb96698e', '01012345678', 'ì •ê°œë°œ', 'ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬', true, NOW())
   ON CONFLICT (phone_number) DO NOTHING;
   "
   ```

3. **í¬ë¡  ì‘ì—… ë¯¸ë“±ë¡**:

   ```bash
   # í¬ë¡  ì‘ì—… ìˆ˜ë™ ë“±ë¡
   docker exec supabase_db_metacat2 psql -U postgres -d postgres -c "
   SELECT cron.schedule('auction-end-processor', '* * * * *', 'SELECT process_ended_auctions();');
   SELECT cron.schedule('auction-status-updater', '*/5 * * * *', 'SELECT update_auction_status_realtime();');
   "
   ```

4. **ì „ì²´ í™˜ê²½ ë¦¬ì…‹**:
   ```bash
   # ì™„ì „ ì´ˆê¸°í™” í›„ ì¬ì‹œì‘
   npx supabase db reset
   docker cp supabase/migrations/20250201000006_create_auction_processor_functions.sql supabase_db_metacat2:/tmp/
   docker exec supabase_db_metacat2 psql -U postgres -d postgres -f /tmp/20250201000006_create_auction_processor_functions.sql
   ```

### ë””ë²„ê¹… ëª…ë ¹ì–´

```bash
# í•¨ìˆ˜ ì¡´ì¬ í™•ì¸
docker exec supabase_db_metacat2 psql -U postgres -d postgres -c "SELECT proname FROM pg_proc WHERE proname LIKE '%auction%';"

# í¬ë¡  ì‘ì—… ìƒíƒœ í™•ì¸
docker exec supabase_db_metacat2 psql -U postgres -d postgres -c "SELECT * FROM cron.job WHERE jobname LIKE '%auction%';"

# í…Œì´ë¸” ì¡´ì¬ í™•ì¸
docker exec supabase_db_metacat2 psql -U postgres -d postgres -c "SELECT tablename FROM pg_tables WHERE schemaname = 'public' AND tablename LIKE '%auction%';"
```

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„

í…ŒìŠ¤íŠ¸ê°€ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ë©´:

1. **âœ… ì™„ë£Œëœ ê°œì„ ì‚¬í•­ë“¤**:

   - í¬ë¡  ê¸°ë°˜ ìë™ ê²½ë§¤ ì²˜ë¦¬ ì‹œìŠ¤í…œ
   - í”„ë¡ íŠ¸ì—”ë“œ UI/UX ê°œì„  (ëª©ë¡ ì¹´ë“œ, ì‹œê°„ í‘œì‹œ, ë ˆì´ì•„ì›ƒ)
   - ë§ˆê° ì„ë°• ì…ì°° ê¸°ëŠ¥
   - ì •í™•í•œ ì¶•í•˜ ë©”ì‹œì§€ í‘œì‹œ

2. **ğŸ”„ í–¥í›„ ê°œë°œ ë°©í–¥**:
   - ì‚¬ìš©ì ì•Œë¦¼: ë‚™ì°°/ìœ ì°° ê²°ê³¼ í‘¸ì‹œ ì•Œë¦¼ êµ¬í˜„
   - ê²°ì œ ì‹œìŠ¤í…œ: ë‚™ì°° í›„ ê²°ì œ í”„ë¡œì„¸ìŠ¤ êµ¬í˜„
   - ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸: WebSocket ê¸°ë°˜ ì‹¤ì‹œê°„ ê²½ë§¤ ìƒíƒœ ì—…ë°ì´íŠ¸
   - ë¶„ì„ ëŒ€ì‹œë³´ë“œ: ê²½ë§¤ ì„±ê³¼ ë¶„ì„ ë° í†µê³„

## ğŸ“š ê´€ë ¨ íŒŒì¼

### ğŸ—‚ï¸ **í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸**:

- `instant-test-scenarios.sql` - ìˆ˜ë™ ì¦‰ì‹œ ì²˜ë¦¬ í…ŒìŠ¤íŠ¸
- `instant-test-scenarios-with-cron.sql` - í¬ë¡  ìë™ ì²˜ë¦¬ í…ŒìŠ¤íŠ¸

### ğŸ“„ **ë§ˆì´ê·¸ë ˆì´ì…˜**:

- `20250201000005_create_auction_results_system.sql` - ê²½ë§¤ ê²°ê³¼ í…Œì´ë¸”
- `20250201000006_create_auction_processor_functions.sql` - í¬ë¡  ì‹œìŠ¤í…œ

### ğŸ¨ **í”„ë¡ íŠ¸ì—”ë“œ ì»´í¬ë„ŒíŠ¸**:

- `components/auction/result/AuctionResultSection.tsx` - ê²°ê³¼ í‘œì‹œ ë©”ì¸ ì»´í¬ë„ŒíŠ¸
- `components/auction/result/WinningResultCard.tsx` - ë‚™ì°° ì„±ê³µ ì¹´ë“œ
- `components/auction/result/LosingResultCard.tsx` - ë‚™ì°° ì‹¤íŒ¨ ì¹´ë“œ
- `screens/auction-list/components/AuctionItemCard.tsx` - ëª©ë¡ ì¹´ë“œ (ê°œì„ ë¨)

---

**ğŸ’¡ íŒ**:

- ê°œë°œ ì¤‘ì—ëŠ” **ìˆ˜ë™ ë°©ì‹**ìœ¼ë¡œ ë¹ ë¥´ê²Œ í…ŒìŠ¤íŠ¸
- ìµœì¢… ê²€ì¦ ì‹œì—ëŠ” **í¬ë¡  ë°©ì‹**ìœ¼ë¡œ ì‹¤ì œ í™˜ê²½ í…ŒìŠ¤íŠ¸
- ë¬¸ì œ ë°œìƒ ì‹œ `npx supabase db reset`ìœ¼ë¡œ í™˜ê²½ ì´ˆê¸°í™” ê°€ëŠ¥
